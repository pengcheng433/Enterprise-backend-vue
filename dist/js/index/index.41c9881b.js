import{T as ne}from"../@element-plus/@element-plus.01e950e2.js";import{f as A}from"../news/news.8f1b56e5.js";import{_ as G}from"../../assets/index-30bdac58.js";import{E as j,l as E}from"../element-plus/element-plus.8d403dde.js";import{l as L,k as te,f as re,q as se,x as de,v as ce,t as ie,o as t,c as g,a as W,u as S,V as ue,W as pe,e as q,an as d,a4 as k,_,Q as V,ae as M,Z as u,a2 as P,a3 as _e,a1 as Y}from"../@vue/@vue.133e0034.js";const me=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],fe=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"];let C=[];function ye(){return window.tinymce}const ge=(c,I)=>{const h=document.getElementById(c),l=I||function(){};if(!h){const s=document.createElement("script");s.src=c,s.id=c,document.body.appendChild(s),C.push(l),("onload"in s?v:r)(s)}h&&l&&(ye()?l(null,h):C.push(l));function v(s){s.onload=function(){this.onerror=this.onload=null;for(const f of C)f(null,s);C=null},s.onerror=function(){this.onerror=this.onload=null,l(new Error("Failed to load "+c),s)}}function r(s){s.onreadystatechange=function(){if(!(this.readyState!=="complete"&&this.readyState!=="loaded")){this.onreadystatechange=null;for(const f of C)f(null,s);C=null}}}};const he=["id"],be={__name:"index",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+((Math.random()*1e3).toFixed(0)+"")}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"99%"},readOnly:{type:Boolean,default:!1}},emits:["input"],setup(c,{expose:I,emit:h}){const l=c,v="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",r=L({hasChange:!1,hasInit:!1,tinymceId:l.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}),s=()=>{window.tinymce.init({selector:`#${r.tinymceId}`,content_style:"p {margin: 0px; border:0px ; padding: 4px;}",language:r.languageTypeList.zh,height:l.height,body_class:"panel-body ",object_resizing:!1,readonly:l.readOnly,statusbar:!l.readOnly,toolbar:l.readOnly?!1:l.toolbar.length>0?l.toolbar:fe,menubar:l.readOnly?!1:l.menubar,plugins:l.readOnly?!1:me,images_upload_url:"/upload/image",images_upload_handler:async(o,p,U)=>{var x=o.blob(),b=new FormData;b.append("file",x,x.name);const m=await A(b);m.data.url?(p(m.data.url),j.success(m.msg)):j.warn(m.msg)},end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,plugin_preview_width:"500",plugin_preview_height:"600",advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:o=>{l.value&&o.setContent(l.value),r.hasInit=!0,o.on("NodeChange Change KeyUp SetContent",()=>{r.hasChange=!0,h("input",o.getContent())})},setup(o){o.on("FullscreenStateChanged",p=>{r.fullscreen=p.state})},file_picker_types:"file image media",convert_urls:!1})},f=()=>{ge(v,o=>{if(o){j.error(o.message);return}s()})},n=o=>{var p;(p=window.tinymce)!=null&&p.get(r.tinymceId)&&window.tinymce.get(r.tinymceId).setContent(o)},z=()=>{var o;if((o=window.tinymce)!=null&&o.get(r.tinymceId))return window.tinymce.get(r.tinymceId).getContent()},D=()=>{const o=window.tinymce.get(r.tinymceId);r.fullscreen&&o.execCommand("mceFullScreen"),o&&o.destroy()},O=te(()=>{const o=""+l.width;return/^[\d]+(\.[\d]+)?$/.test(o)?`${o}px`:o});re(()=>l.value,o=>{!r.hasChange&&r.hasInit&&se(()=>window.tinymce.get(r.tinymceId).setContent(o||""))},{immediate:!0}),de(()=>{f()}),ce(()=>{D()}),I({setContent:n,getContent:z});const{tinymceId:T,fullscreen:i}=ie(r);return(o,p)=>(t(),g("div",{class:ue([{fullscreen:S(i)},"tinymce-container"]),style:pe({width:S(O)})},[W("textarea",{id:S(T),class:"tinymce-textarea"},null,8,he)],6))}},N=G(be,[["__scopeId","data-v-49508af5"]]),we=Object.assign(N,{install(c){c.component(N.name,N)}});const ke=["src"],ve=["src"],xe={__name:"index",props:{formItems:{type:Array,required:!0},form:{type:Object,required:!0},rules:{type:Object,default:()=>({})},labelWidth:{type:String,default:"100px"},rowGutter:{type:Number,default:20}},setup(c,{expose:I}){const h=c,l=i=>i.span?Math.min(24,i.span):24,v=q(null),r=q(""),s=q(!1),f=i=>{r.value=i,s.value=!0};I({form:v});const n=L(h.form),z=(i,o,p)=>{n[p]=o.checkedKeys},D=(i,o)=>{n[i]=o},O=(i,o)=>{console.log(i),console.log(o)},T=async(i,o)=>{const U=["image/jpeg","image/png"],x=i.size<=5242880,b=U.includes(i.type);if(!x)return E.ElMessage.error("文件大小超过限制，请选择较小的图片"),!1;if(!b)return E.ElMessage.error("只允许上传 JPEG 或 PNG 格式的图片"),!1;const m=new FormData;m.append("file",i);const w=await A(m);return console.log(w),w.data.url?(n[o]=w.data.url,E.ElMessage.success(w.msg)):E.ElMessage.warn(w.msg),!1};return(i,o)=>{const p=d("el-radio"),U=d("el-radio-group"),x=d("el-tree"),b=d("el-icon"),m=d("el-upload"),w=d("el-button"),K=d("el-input-number"),H=d("el-option"),J=d("el-select"),Q=d("el-cascader"),R=d("el-date-picker"),X=d("el-input"),Z=d("el-form-item"),ee=d("el-col"),oe=d("el-row"),le=d("el-form"),ae=d("el-dialog");return t(),g(V,null,[k(le,{model:n,rules:c.rules,ref_key:"form",ref:v,"label-width":c.labelWidth},{default:_(()=>[k(oe,{gutter:c.rowGutter},{default:_(()=>[(t(!0),g(V,null,M(c.formItems,e=>(t(),u(ee,{span:l(e),xs:l(e),sm:l(e),md:l(e),lg:l(e),key:e.prop},{default:_(()=>[k(Z,{prop:e.prop,label:e.label,rules:e.rules,required:e.required},{default:_(()=>{var B;return[e.is==="radio"?(t(),u(U,{key:0,modelValue:n[e.prop],"onUpdate:modelValue":a=>n[e.prop]=a,size:((B=e.option)==null?void 0:B.size)||"default"},{default:_(()=>{var a;return[(t(!0),g(V,null,M((a=e.option)==null?void 0:a.list,y=>{var $;return t(),u(p,{key:y.value,label:y.value,disabled:(y==null?void 0:y.disabled)||!1,border:(($=e.option)==null?void 0:$.border)||!1},{default:_(()=>[P(_e(y.label),1)]),_:2},1032,["label","disabled","border"])}),128))]}),_:2},1032,["modelValue","onUpdate:modelValue","size"])):e.is==="tree"?(t(),u(x,{key:1,data:e.option.data,props:e.option.props||{children:"children",label:"label"},"show-checkbox":e.option.showCheckbox||!0,"node-key":e.option.nodeKey||"id","default-checked-keys":n[e.prop],onCheck:(a,y)=>z(a,y,e.prop)},null,8,["data","props","show-checkbox","node-key","default-checked-keys","onCheck"])):e.is==="textarea"?(t(),u(S(we),{key:2,value:n[e.prop],height:500,onInput:a=>D(e.prop,a)},null,8,["value","onInput"])):e.is==="upload"?(t(),g(V,{key:3},[k(m,{class:"avatar-uploader",action:"#","show-file-list":!1,"on-success":O,"before-upload":a=>T(a,e.prop)},{default:_(()=>[n[e.prop]?(t(),g("img",{key:0,src:n[e.prop],class:"avatar"},null,8,ke)):(t(),u(b,{key:1,class:"avatar-uploader-icon"},{default:_(()=>[P("+")]),_:1}))]),_:2},1032,["before-upload"]),n[e.prop]?(t(),u(w,{key:0,type:"primary",circle:"",style:{"margin-left":"5px"},onClick:a=>f(n[e.prop])},{default:_(()=>[k(b,null,{default:_(()=>[k(S(ne))]),_:1})]),_:2},1032,["onClick"])):Y("",!0)],64)):e.is==="number"?(t(),u(K,{key:4,modelValue:n[e.prop],"onUpdate:modelValue":a=>n[e.prop]=a,min:1,controls:!1},null,8,["modelValue","onUpdate:modelValue"])):e.is==="select"?(t(),u(J,{key:5,modelValue:n[e.prop],"onUpdate:modelValue":a=>n[e.prop]=a,placeholder:`选择${e.label}`},{default:_(()=>[(t(!0),g(V,null,M(e.option.list,a=>(t(),u(H,{key:a[e.option.value],label:a[e.option.label],value:a[e.option.value]},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):e.is==="cascader"?(t(),u(Q,{key:6,modelValue:n[e.prop],"onUpdate:modelValue":a=>n[e.prop]=a,options:e.options,clearable:""},null,8,["modelValue","onUpdate:modelValue","options"])):e.is==="datetime"?(t(),u(R,{key:7,modelValue:n[e.prop],"onUpdate:modelValue":a=>n[e.prop]=a,type:"datetime",placeholder:e.placeholder,format:"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(t(),g(V,{key:8},[e.prop!=""?(t(),u(X,{key:0,disabled:(e==null?void 0:e.disabled)||!1,modelValue:n[e.prop],"onUpdate:modelValue":a=>n[e.prop]=a,placeholder:e.placeholder,type:e.type||"inpuit","show-password":e.showPassword||!1},null,8,["disabled","modelValue","onUpdate:modelValue","placeholder","type","show-password"])):Y("",!0)],64))]}),_:2},1032,["prop","label","rules","required"])]),_:2},1032,["span","xs","sm","md","lg"]))),128))]),_:1},8,["gutter"])]),_:1},8,["model","rules","label-width"]),k(ae,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e)},{default:_(()=>[W("img",{"w-full":"",src:r.value,alt:"Preview Image"},null,8,ve)]),_:1},8,["modelValue"])],64)}}},F=G(xe,[["__scopeId","data-v-6e3ad334"]]),Ee=Object.assign(F,{install(c){c.component(F.name,F)}});export{Ee as D};
