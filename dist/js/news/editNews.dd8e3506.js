import{r as q}from"../role/role.56a83efa.js";import{D as B}from"../index/index.41c9881b.js";import{b as D,u as R}from"./news.8f1b56e5.js";import{c as V}from"../newCategory/newCategory.d8bef9d4.js";import{a as E}from"../vue-router/vue-router.aebc008a.js";import{e as r,x as M,l,c as L,a4 as s,_ as n,an as c,o as S,u as j,a as z,a2 as T}from"../@vue/@vue.133e0034.js";import{l as d}from"../element-plus/element-plus.8d403dde.js";import{_ as A}from"../../assets/index-30bdac58.js";import"../@element-plus/@element-plus.01e950e2.js";import"../@ctrl/@ctrl.739734d8.js";import"../lodash-es/lodash-es.3689fb67.js";import"../@vueuse/@vueuse.902d2a47.js";import"../@popperjs/@popperjs.d5d3bfa4.js";import"../dayjs/dayjs.aab16a72.js";import"../async-validator/async-validator.124ce023.js";import"../memoize-one/memoize-one.e2e9ba7a.js";import"../escape-html/escape-html.1d60d822.js";import"../normalize-wheel-es/normalize-wheel-es.2d7fa0bb.js";import"../@floating-ui/@floating-ui.c244c5cb.js";import"../vue/vue.b7c74ca4.js";import"../lodash-unified/lodash-unified.917db8bb.js";import"../pinia/pinia.dbd2d364.js";import"../js-cookie/js-cookie.cf83ad76.js";import"../axios/axios.aba6f0e0.js";import"../geotiff/geotiff.41c905a7.js";import"../fuse.js/fuse.js.88e2763d.js";import"../path-browserify/path-browserify.188d1ff8.js";import"../screenfull/screenfull.b3e6dc1f.js";import"../mitt/mitt.f7ef348c.js";import"../nprogress/nprogress.71449f25.js";/* empty css                                 */import"../clipboard/clipboard.860bb701.js";import"../vue-i18n/vue-i18n.dbf743d6.js";import"../@intlify/@intlify.771bffe6.js";import"../xe-utils/xe-utils.ae8f073f.js";import"../vxe-table/vxe-table.548b57f4.js";import"../vue3-lottie/vue3-lottie.24ecfee7.js";import"../lottie-web/lottie-web.c7050559.js";const G={class:"common-layout"},H={class:"flex justify-Start pl-5"},J={__name:"editNews",setup(K,{expose:g}){const v=E(),p=r("");M(()=>{const{query:e}=v.currentRoute.value;p.value=e.id,u(),b(),y()});const y=async()=>{const{data:e}=await V();f.list=e},b=async()=>{const e=await D({id:p.value}),{id:o,title:a,category:i,coverImage:m,content:F,views:k}=e.data;t.id=o,t.title=a,t.coverImage=m,t.views=k,t.category=parseInt(i),t.content=F},u=async()=>{const{data:e}=await q(x);w.value=e},w=r([]),N=r(null),_=r(null),f=l({list:[],label:"name",value:"id"}),I=r([{prop:"title",label:"文章标题",rules:[{required:!0,message:"必须输入标题",trigger:"blur"}]},{prop:"coverImage",label:"文章封面",is:"upload"},{prop:"views",label:"点击数量",is:"number"},{prop:"category",is:"select",option:f,label:"文章种类",rules:[{required:!0,message:"必须选择文章种类",trigger:"blur"}]},{prop:"content",label:"文章内容",is:"textarea"}]),x=l({search:""}),t=l({id:"",title:"",coverImage:"",views:1,category:"",content:""}),h=async()=>{if(await _.value.form.validate()){const o=await R(t);o.data?(d.ElMessage({message:o.msg,type:"success"}),u()):d.ElMessage.error(o.msg)}},C=r({});return g({tableItemSelectionRef:N}),(e,o)=>{const a=c("el-button"),i=c("el-main"),m=c("el-container");return S(),L("div",G,[s(m,null,{default:n(()=>[s(i,null,{default:n(()=>[s(j(B),{"form-items":I.value,form:t,rules:C.value,ref_key:"customFormref",ref:_},null,8,["form-items","form","rules"]),z("div",H,[s(a,{type:"primary",onClick:h,size:"large"},{default:n(()=>[T("确定")]),_:1})])]),_:1})]),_:1})])}}};const Be=A(J,[["__scopeId","data-v-e3f326b6"]]);export{Be as default};
